/**
 * typology - A type checking library for Node.js and the browser.
 * @version v0.1.0
 * @link https://github.com/jacomyal/typology
 * @license MIT
 */
!function(){"use strict";var e,t,r="Boolean Number String Function Array Date RegExp Object".split(" "),i={},n=["*"],o={};for(e in r)t=r[e],n.push(t.toLowerCase()),i["[object "+t+"]"]=t.toLowerCase();var s={version:"0.1.0",add:function(e,t){var r,i,s,f,a,d;if(1===arguments.length){if("object"!==this.get(e))throw new Error("If types.add is called with one argument, this one has to be an object.");r=e,f=r.id,d=r.type}else{if(2!==arguments.length)throw new Error("types.add has to be called with one or three arguments.");if("string"!=typeof e||!e)throw new Error("If types.add is called with more than one argument, the first one must be the string id.");f=e,d=t}if("string"!==this.get(f)||0===f.length)throw new Error("A type requires an string id.");if(void 0!==o[f]&&"proto"!==o[f])throw new Error('The type "'+f+'" already exists.');if(~n.indexOf(f))throw new Error('"'+f+'" is a reserved type name.');o[f]=1,s=(r||{}).proto||[],s=Array.isArray(s)?s:[s],a={};for(i in s)void 0===o[s[i]]&&(o[s[i]]=1,a[s[i]]=1);if("function"!==this.get(d)&&!this.isValid(d))throw new Error("A type requires a valid definition. This one can be a preexistant type or else a function testing given objects.");if(o[f]=void 0===r?{id:f,type:d}:{},void 0!==r)for(i in r)o[f][i]=r[i];for(i in a)i!==f&&delete o[i]},has:function(e){return!!o[e]},get:function(e){return null===e||void 0===e?String(e):i[Object.prototype.toString.call(e)]||"object"},check:function(e,t){var r,i,s,f=this.get(e);if("string"===this.get(t)){r=t.replace(/^\?/,"").split(/\|/);for(i in r)if(n.indexOf(r[i])<0&&!(r[i]in o))throw new Error("Invalid type.");if(null===e||void 0===e)return!!t.match(/^\?/,"");t=t.replace(/^\?/,"");for(i in r)if(o[r[i]]&&("function"==typeof o[r[i]].type?o[r[i]].type(e)===!0:this.check(e,o[r[i]].type)))return!0;return!(!~r.indexOf("*")&&!~r.indexOf(f))}if("object"===this.get(t)){if("object"!==f)return!1;for(s in t)if(!this.check(e[s],t[s]))return!1;for(s in e)if(void 0===t[s])return!1;return!0}if("array"===this.get(t)){if("array"!==f)return!1;if(1!==t.length)throw new Error("Invalid type.");for(s in e)if(!this.check(e[s],t[0]))return!1;return!0}return!1},isValid:function(e){var t,r,i;if("string"===this.get(e)){t=e.replace(/^\?/,"").split(/\|/);for(i in t)if(n.indexOf(t[i])<0&&!(t[i]in o))return!1;return!0}if("object"===this.get(e)){for(r in e)if(!this.isValid(e[r]))return!1;return!0}return"array"===this.get(e)&&1===e.length?this.isValid(e[0]):!1}};s.add("type",function(e){return s.isValid(e)}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.types=s):"function"==typeof define&&define.amd?define("typology",[],function(){return s}):this.types=s}(this);